{"version":3,"sources":["file:///G:/CocosProjects/Cocos-Learning/assets/Scripts/Cocos%E6%A0%B8%E5%BF%83/2D%20%E5%AF%B9%E8%B1%A1/UI%E7%B3%BB%E7%BB%9F/UI%E7%BB%84%E4%BB%B6/Lesson42_ToggleContainer.ts"],"names":["_decorator","Component","Toggle","ToggleContainer","log","ccclass","property","Lesson42_ToggleContainer","type","getOrCreateToggleContainer","tc","toggleContainer","getComponent","addComponent","setAllowSwitchOff","value","allowSwitchOff","addToggle","toggleToAdd","node","addChild","removeToggle","removeFromParent","notifyToggleCheck","ensureValidState","getActiveToggles","activeToggles","length","onLoad","start","scheduleOnce"],"mappings":";;;;;;;;;;;;;;;;AAESA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,e,OAAAA,e;AAAiBC,MAAAA,G,OAAAA,G;;;;;gGAFzD;;;;;OAGM;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBN,U;AAE9B;AACA;AACA;AACA;AACA;;0CAEaO,wB,WADZF,OAAO,CAAC,0BAAD,C,UAKHC,QAAQ,CAAC;AAAEE,QAAAA,IAAI,EAAEL;AAAR,OAAD,C,UA2BRG,QAAQ,CAAC;AAAEE,QAAAA,IAAI,EAAEN;AAAR,OAAD,C,2BAhCb,MACaK,wBADb,SAC8CN,SAD9C,CACwD;AAAA;AAAA;;AAEpD;AACA;AAHoD;;AA2BpD;;AAEA;AACA;AA9BoD;AAAA;;AAOpD;AACAQ,QAAAA,0BAA0B,GAA2B;AAAA;;AACjD,cAAIC,EAAE,4BAAG,KAAKC,eAAR,oCAA2B,KAAKC,YAAL,CAAkBT,eAAlB,CAAjC;;AACA,cAAI,CAACO,EAAL,EAAS;AACLA,YAAAA,EAAE,GAAG,KAAKG,YAAL,CAAkBV,eAAlB,CAAL;AACAC,YAAAA,GAAG,CAAC,yBAAD,CAAH;AACH;;AACD,iBAAOM,EAAP;AACH,SAfmD,CAgBpD;;AAEA;AACA;;;AACAI,QAAAA,iBAAiB,CAACC,KAAD,EAAiB;AAC9B,cAAML,EAAE,GAAG,KAAKD,0BAAL,EAAX;AACA,cAAI,CAACC,EAAL,EAAS;AAETA,UAAAA,EAAE,CAACM,cAAH,GAAoBD,KAApB;AACAX,UAAAA,GAAG,4CAAYW,KAAZ,CAAH;AACH;;AAQDE,QAAAA,SAAS,GAAG;AACR,cAAMP,EAAE,GAAG,KAAKD,0BAAL,EAAX;AACA,cAAI,CAACC,EAAD,IAAO,CAAC,KAAKQ,WAAjB,EAA8B;AAE9BR,UAAAA,EAAE,CAACS,IAAH,CAAQC,QAAR,CAAiB,KAAKF,WAAL,CAAiBC,IAAlC;AACAf,UAAAA,GAAG,CAAC,6BAAD,CAAH;AACH;;AAEDiB,QAAAA,YAAY,GAAG;AACX,cAAMX,EAAE,GAAG,KAAKD,0BAAL,EAAX;AACA,cAAI,CAACC,EAAD,IAAO,CAAC,KAAKQ,WAAjB,EAA8B;AAE9B,eAAKA,WAAL,CAAiBC,IAAjB,CAAsBG,gBAAtB;AACAlB,UAAAA,GAAG,CAAC,6BAAD,CAAH;AACH,SAhDmD,CAiDpD;;AAEA;AACA;;;AACAmB,QAAAA,iBAAiB,GAAG;AAChB,cAAMb,EAAE,GAAG,KAAKD,0BAAL,EAAX;AACA,cAAI,CAACC,EAAL,EAAS;AAETA,UAAAA,EAAE,CAACa,iBAAH,CAAqB,KAAKL,WAA1B;AACAd,UAAAA,GAAG,CAAC,cAAD,CAAH;AACH;;AAEDoB,QAAAA,gBAAgB,GAAG;AACf,cAAMd,EAAE,GAAG,KAAKD,0BAAL,EAAX;AACA,cAAI,CAACC,EAAL,EAAS;AAETA,UAAAA,EAAE,CAACc,gBAAH;AACApB,UAAAA,GAAG,CAAC,QAAD,CAAH;AACH,SAnEmD,CAoEpD;;AAEA;AACA;;;AACAqB,QAAAA,gBAAgB,GAAG;AACf,cAAMf,EAAE,GAAG,KAAKD,0BAAL,EAAX;AACA,cAAI,CAACC,EAAL,EAAS;AAET,cAAMgB,aAAa,GAAGhB,EAAE,CAACgB,aAAH,EAAtB;AACAtB,UAAAA,GAAG,0DAAqBsB,aAAa,CAACC,MAAnC,CAAH;AACH,SA9EmD,CA+EpD;;AAEA;AACA;;;AACAC,QAAAA,MAAM,GAAG;AACL,eAAKd,iBAAL,CAAuB,IAAvB,EADK,CACyB;;AAC9B,eAAKG,SAAL,GAFK,CAEwB;AAChC;;AAEDY,QAAAA,KAAK,GAAG;AACJ;AACA,eAAKC,YAAL,CAAkB,MAAM,KAAKP,iBAAL,EAAxB,EAAkD,CAAlD;AACH,SA3FmD,CA4FpD;;;AA5FoD,O;;;;;iBAKV,I;;;;;;;iBA2Bb,I","sourcesContent":["// Lesson42_ToggleContainer.ts\n\nimport { _decorator, Component, Toggle, ToggleContainer, log } from 'cc';\nconst { ccclass, property } = _decorator;\n\n/**\n * Lesson42_ToggleContainer\n * 演示 Cocos Creator 3.8 ToggleContainer 组件的常见 API 用法\n * 按功能划分为不同折叠块，便于查阅\n */\n@ccclass('Lesson42_ToggleContainer')\nexport class Lesson42_ToggleContainer extends Component {\n\n    /* ========================= 1. 获取/创建 ToggleContainer 组件 ========================= */\n    // #region 获取/创建 ToggleContainer\n    @property({ type: ToggleContainer })\n    toggleContainer: ToggleContainer | null = null;\n\n    /** 运行时动态创建或获取 ToggleContainer 组件 */\n    getOrCreateToggleContainer(): ToggleContainer | null {\n        let tc = this.toggleContainer ?? this.getComponent(ToggleContainer);\n        if (!tc) {\n            tc = this.addComponent(ToggleContainer);\n            log('动态添加 ToggleContainer 组件');\n        }\n        return tc;\n    }\n    // #endregion\n\n    /* ========================= 2. 设置允许取消选中 ========================= */\n    // #region 设置允许取消选中\n    setAllowSwitchOff(value: boolean) {\n        const tc = this.getOrCreateToggleContainer();\n        if (!tc) return;\n\n        tc.allowSwitchOff = value;\n        log(`允许取消选中: ${value}`);\n    }\n    // #endregion\n\n    /* ========================= 3. 添加/移除 Toggle ========================= */\n    // #region 添加/移除 Toggle\n    @property({ type: Toggle })\n    toggleToAdd: Toggle | null = null;\n\n    addToggle() {\n        const tc = this.getOrCreateToggleContainer();\n        if (!tc || !this.toggleToAdd) return;\n\n        tc.node.addChild(this.toggleToAdd.node);\n        log('添加 Toggle 到 ToggleContainer');\n    }\n\n    removeToggle() {\n        const tc = this.getOrCreateToggleContainer();\n        if (!tc || !this.toggleToAdd) return;\n\n        this.toggleToAdd.node.removeFromParent();\n        log('从 ToggleContainer 移除 Toggle');\n    }\n    // #endregion\n\n    /* ========================= 4. 刷新状态 ========================= */\n    // #region 刷新状态\n    notifyToggleCheck() {\n        const tc = this.getOrCreateToggleContainer();\n        if (!tc) return;\n\n        tc.notifyToggleCheck(this.toggleToAdd);\n        log('刷新 Toggle 状态');\n    }\n\n    ensureValidState() {\n        const tc = this.getOrCreateToggleContainer();\n        if (!tc) return;\n\n        tc.ensureValidState();\n        log('确保状态有效');\n    }\n    // #endregion\n\n    /* ========================= 5. 获取当前选中的 Toggle ========================= */\n    // #region 获取当前选中的 Toggle\n    getActiveToggles() {\n        const tc = this.getOrCreateToggleContainer();\n        if (!tc) return;\n\n        const activeToggles = tc.activeToggles();\n        log(`当前选中的 Toggle 数量: ${activeToggles.length}`);\n    }\n    // #endregion\n\n    /* ========================= 6. 生命周期示例 ========================= */\n    // #region 生命周期\n    onLoad() {\n        this.setAllowSwitchOff(true); // 初始化允许取消选中\n        this.addToggle();            // 添加 Toggle\n    }\n\n    start() {\n        // 演示：3 秒后刷新状态\n        this.scheduleOnce(() => this.notifyToggleCheck(), 3);\n    }\n    // #endregion\n}"]}