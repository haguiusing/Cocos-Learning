{"version":3,"sources":["file:///G:/CocosProjects/Cocos-Learning/assets/Scripts/Cocos%E6%A0%B8%E5%BF%83/2D%20%E5%AF%B9%E8%B1%A1/UI%E7%B3%BB%E7%BB%9F/UI%E7%BB%84%E4%BB%B6/Lesson48_UIOpacity.ts"],"names":["_decorator","Component","UIOpacity","log","ccclass","property","Lesson48_UIOpacity","type","getOrCreateUIOpacity","uiOpacity","getComponent","addComponent","setOpacity","value","opacity","Math","max","min","getOpacity","fadeOut","duration","schedule","dt","unscheduleAllCallbacks","fadeIn","onLoad","start","scheduleOnce"],"mappings":";;;;;;;;;;;;;;;;AAESA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,G,OAAAA,G;;;;;0FAF3C;;;;;OAGM;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBL,U;AAE9B;AACA;AACA;AACA;AACA;;oCAEaM,kB,WADZF,OAAO,CAAC,oBAAD,C,UAKHC,QAAQ,CAAC;AAAEE,QAAAA,IAAI,EAAEL;AAAR,OAAD,C,2BALb,MACaI,kBADb,SACwCL,SADxC,CACkD;AAAA;AAAA;;AAE9C;AACA;AAH8C;AAAA;;AAO9C;AACAO,QAAAA,oBAAoB,GAAqB;AAAA;;AACrC,cAAIC,SAAS,sBAAG,KAAKA,SAAR,8BAAqB,KAAKC,YAAL,CAAkBR,SAAlB,CAAlC;;AACA,cAAI,CAACO,SAAL,EAAgB;AACZA,YAAAA,SAAS,GAAG,KAAKE,YAAL,CAAkBT,SAAlB,CAAZ;AACAC,YAAAA,GAAG,CAAC,mBAAD,CAAH;AACH;;AACD,iBAAOM,SAAP;AACH,SAf6C,CAgB9C;;AAEA;AACA;;;AACAG,QAAAA,UAAU,CAACC,KAAD,EAAgB;AACtB,cAAMJ,SAAS,GAAG,KAAKD,oBAAL,EAAlB;AACA,cAAI,CAACC,SAAL,EAAgB,OAFM,CAItB;;AACAA,UAAAA,SAAS,CAACK,OAAV,GAAoBC,IAAI,CAACC,GAAL,CAAS,CAAT,EAAYD,IAAI,CAACE,GAAL,CAAS,GAAT,EAAcJ,KAAd,CAAZ,CAApB;AACAV,UAAAA,GAAG,kDAAaM,SAAS,CAACK,OAAvB,CAAH;AACH,SA3B6C,CA4B9C;;AAEA;AACA;;;AACAI,QAAAA,UAAU,GAAG;AACT,cAAMT,SAAS,GAAG,KAAKD,oBAAL,EAAlB;AACA,cAAI,CAACC,SAAL,EAAgB;AAEhB,cAAMK,OAAO,GAAGL,SAAS,CAACK,OAA1B;AACAX,UAAAA,GAAG,sCAAWW,OAAX,CAAH;AACA,iBAAOA,OAAP;AACH,SAvC6C,CAwC9C;;AAEA;AACA;;;AACAK,QAAAA,OAAO,CAACC,QAAD,EAAmB;AACtB,cAAMX,SAAS,GAAG,KAAKD,oBAAL,EAAlB;AACA,cAAI,CAACC,SAAL,EAAgB,OAFM,CAItB;;AACA,eAAKY,QAAL,CAAeC,EAAD,IAAQ;AAClBb,YAAAA,SAAS,CAACK,OAAV,IAAqB,MAAMQ,EAAN,GAAWF,QAAhC;;AACA,gBAAIX,SAAS,CAACK,OAAV,IAAqB,CAAzB,EAA4B;AACxB,mBAAKS,sBAAL;AACAd,cAAAA,SAAS,CAACK,OAAV,GAAoB,CAApB;AACAX,cAAAA,GAAG,CAAC,MAAD,CAAH;AACH;AACJ,WAPD,EAOG,CAPH,EAOM,CAPN,EAOS,CAPT;AAQH;;AAEDqB,QAAAA,MAAM,CAACJ,QAAD,EAAmB;AACrB,cAAMX,SAAS,GAAG,KAAKD,oBAAL,EAAlB;AACA,cAAI,CAACC,SAAL,EAAgB,OAFK,CAIrB;;AACA,eAAKY,QAAL,CAAeC,EAAD,IAAQ;AAClBb,YAAAA,SAAS,CAACK,OAAV,IAAqB,MAAMQ,EAAN,GAAWF,QAAhC;;AACA,gBAAIX,SAAS,CAACK,OAAV,IAAqB,GAAzB,EAA8B;AAC1B,mBAAKS,sBAAL;AACAd,cAAAA,SAAS,CAACK,OAAV,GAAoB,GAApB;AACAX,cAAAA,GAAG,CAAC,OAAD,CAAH;AACH;AACJ,WAPD,EAOG,CAPH,EAOM,CAPN,EAOS,CAPT;AAQH,SAxE6C,CAyE9C;;AAEA;AACA;;;AACAsB,QAAAA,MAAM,GAAG;AACL,eAAKb,UAAL,CAAgB,GAAhB,EADK,CACiB;AACzB;;AAEDc,QAAAA,KAAK,GAAG;AACJ;AACA,eAAKC,YAAL,CAAkB,MAAM,KAAKR,OAAL,CAAa,CAAb,CAAxB,EAAyC,CAAzC;AACH,SApF6C,CAqF9C;;;AArF8C,O;;;;;iBAKhB,I","sourcesContent":["// Lesson48_UIOpacity.ts\n\nimport { _decorator, Component, UIOpacity, log } from 'cc';\nconst { ccclass, property } = _decorator;\n\n/**\n * Lesson48_UIOpacity\n * 演示 Cocos Creator 3.8 UIOpacity 组件的常见 API 用法\n * 按功能划分为不同折叠块，便于查阅\n */\n@ccclass('Lesson48_UIOpacity')\nexport class Lesson48_UIOpacity extends Component {\n\n    /* ========================= 1. 获取/创建 UIOpacity 组件 ========================= */\n    // #region 获取/创建 UIOpacity\n    @property({ type: UIOpacity })\n    uiOpacity: UIOpacity | null = null;\n\n    /** 运行时动态创建或获取 UIOpacity 组件 */\n    getOrCreateUIOpacity(): UIOpacity | null {\n        let uiOpacity = this.uiOpacity ?? this.getComponent(UIOpacity);\n        if (!uiOpacity) {\n            uiOpacity = this.addComponent(UIOpacity);\n            log('动态添加 UIOpacity 组件');\n        }\n        return uiOpacity;\n    }\n    // #endregion\n\n    /* ========================= 2. 设置透明度 ========================= */\n    // #region 设置透明度\n    setOpacity(value: number) {\n        const uiOpacity = this.getOrCreateUIOpacity();\n        if (!uiOpacity) return;\n\n        // 设置透明度（0-255）\n        uiOpacity.opacity = Math.max(0, Math.min(255, value));\n        log(`透明度已设置为: ${uiOpacity.opacity}`);\n    }\n    // #endregion\n\n    /* ========================= 3. 获取当前透明度 ========================= */\n    // #region 获取透明度\n    getOpacity() {\n        const uiOpacity = this.getOrCreateUIOpacity();\n        if (!uiOpacity) return;\n\n        const opacity = uiOpacity.opacity;\n        log(`当前透明度: ${opacity}`);\n        return opacity;\n    }\n    // #endregion\n\n    /* ========================= 4. 动态改变透明度 ========================= */\n    // #region 动态改变透明度\n    fadeOut(duration: number) {\n        const uiOpacity = this.getOrCreateUIOpacity();\n        if (!uiOpacity) return;\n\n        // 逐渐变透明\n        this.schedule((dt) => {\n            uiOpacity.opacity -= 255 * dt / duration;\n            if (uiOpacity.opacity <= 0) {\n                this.unscheduleAllCallbacks();\n                uiOpacity.opacity = 0;\n                log('完全透明');\n            }\n        }, 0, 0, 0);\n    }\n\n    fadeIn(duration: number) {\n        const uiOpacity = this.getOrCreateUIOpacity();\n        if (!uiOpacity) return;\n\n        // 逐渐变不透明\n        this.schedule((dt) => {\n            uiOpacity.opacity += 255 * dt / duration;\n            if (uiOpacity.opacity >= 255) {\n                this.unscheduleAllCallbacks();\n                uiOpacity.opacity = 255;\n                log('完全不透明');\n            }\n        }, 0, 0, 0);\n    }\n    // #endregion\n\n    /* ========================= 5. 生命周期示例 ========================= */\n    // #region 生命周期\n    onLoad() {\n        this.setOpacity(128); // 初始化透明度为半透明\n    }\n\n    start() {\n        // 演示：3 秒后逐渐变透明\n        this.scheduleOnce(() => this.fadeOut(2), 3);\n    }\n    // #endregion\n}"]}