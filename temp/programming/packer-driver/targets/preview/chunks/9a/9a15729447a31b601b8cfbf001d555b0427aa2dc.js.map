{"version":3,"sources":["file:///G:/CocosProjects/Cocos-Learning/assets/Scripts/Cocos%E6%A0%B8%E5%BF%83/2D%20%E5%AF%B9%E8%B1%A1/UI%E7%B3%BB%E7%BB%9F/UI%E7%BB%84%E4%BB%B6/Lesson38_ProgressBar.ts"],"names":["_decorator","Component","ProgressBar","Sprite","log","ccclass","property","Lesson38_ProgressBar","type","getOrCreateProgressBar","pb","progressBar","getComponent","addComponent","setProgress","value","progress","Math","max","min","toFixed","simulateLoading","totalTime","elapsed","schedule","dt","p","unscheduleAllCallbacks","setHorizontalMode","mode","Mode","HORIZONTAL","reverse","setVerticalMode","VERTICAL","setRadialMode","FILLED","setTotalLength","len","totalLength","setBarSprite","barSprite","toggleReverse","onLoad"],"mappings":"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","sourcesContent":["// Lesson38_ProgressBar.ts\n\nimport { _decorator, Component, ProgressBar, Sprite, log } from 'cc';\nconst { ccclass, property } = _decorator;\n\n/**\n * Lesson38_ProgressBar\n * 演示 Cocos Creator 3.8 ProgressBar 组件的常见 API 用法\n * 按功能划分为不同折叠块，便于查阅\n */\n@ccclass('Lesson38_ProgressBar')\nexport class Lesson38_ProgressBar extends Component {\n\n    /* ========================= 1. 获取/创建 ProgressBar 组件 ========================= */\n    // #region 获取/创建 ProgressBar\n    @property({ type: ProgressBar })\n    progressBar: ProgressBar | null = null;\n\n    /** 运行时获取或动态创建 ProgressBar */\n    getOrCreateProgressBar(): ProgressBar | null {\n        let pb = this.progressBar ?? this.getComponent(ProgressBar);\n        if (!pb) {\n            pb = this.addComponent(ProgressBar);\n            log('动态添加 ProgressBar 组件');\n        }\n        return pb;\n    }\n    // #endregion\n\n    /* ========================= 2. 设置进度值 ========================= */\n    // #region 设置进度值\n    setProgress(value: number) {\n        const pb = this.getOrCreateProgressBar();\n        if (!pb) return;\n\n        // 限定在 0~1 区间\n        pb.progress = Math.max(0, Math.min(1, value));\n        log(`当前进度: ${(pb.progress * 100).toFixed(1)}%`);\n    }\n\n    /** 从 0 递增到 1 的示例 */\n    simulateLoading(totalTime = 3) {\n        let elapsed = 0;\n        this.schedule(dt => {\n            elapsed += dt;\n            const p = Math.min(1, elapsed / totalTime);\n            this.setProgress(p);\n            if (p >= 1) this.unscheduleAllCallbacks();\n        });\n    }\n    // #endregion\n\n    /* ========================= 3. 设置方向与模式 ========================= */\n    // #region 方向与模式\n    setHorizontalMode() {\n        const pb = this.getOrCreateProgressBar();\n        if (!pb) return;\n\n        pb.mode = ProgressBar.Mode.HORIZONTAL;\n        pb.reverse = false; // 从左到右\n    }\n\n    setVerticalMode(reverse = false) {\n        const pb = this.getOrCreateProgressBar();\n        if (!pb) return;\n\n        pb.mode = ProgressBar.Mode.VERTICAL;\n        pb.reverse = reverse; // 默认从上到下，reverse=true 则从下到上\n    }\n\n    setRadialMode() {\n        const pb = this.getOrCreateProgressBar();\n        if (!pb) return;\n\n        pb.mode = ProgressBar.Mode.FILLED; // 径向/环形进度\n\n    }\n    // #endregion\n\n    /* ========================= 4. 设置进度条长度 ========================= */\n    // #region 总长度\n    setTotalLength(len: number) {\n        const pb = this.getOrCreateProgressBar();\n        if (!pb) return;\n\n        pb.totalLength = len; // 像素长度\n    }\n    // #endregion\n\n    /* ========================= 5. 设置/替换 barSprite ========================= */\n    // #region 进度条 Sprite\n    @property({ type: Sprite })\n    barSprite: Sprite | null = null;\n\n    setBarSprite() {\n        const pb = this.getOrCreateProgressBar();\n        if (!pb) return;\n\n        if (this.barSprite) pb.barSprite = this.barSprite;\n    }\n    // #endregion\n\n    /* ========================= 6. 反转方向 ========================= */\n    // #region 反转\n    toggleReverse() {\n        const pb = this.getOrCreateProgressBar();\n        if (!pb) return;\n\n        pb.reverse = !pb.reverse;\n        log(`reverse = ${pb.reverse}`);\n    }\n    // #endregion\n\n    /* ========================= 7. 生命周期示例 ========================= */\n    // #region 生命周期\n    onLoad() {\n        this.setHorizontalMode();\n        this.setTotalLength(200);\n        this.simulateLoading(2);\n    }\n    // #endregion\n}"]}