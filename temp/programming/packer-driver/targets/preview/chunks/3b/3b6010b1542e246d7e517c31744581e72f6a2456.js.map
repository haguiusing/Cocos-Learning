{"version":3,"sources":["file:///G:/CocosProjects/Cocos-Learning/assets/Scripts/Cocos%E6%A0%B8%E5%BF%83/2D%20%E5%AF%B9%E8%B1%A1/2D%20%E6%B8%B2%E6%9F%93/Lesson29_.ts"],"names":["_decorator","Component","MotionStreak","Texture2D","Color","resources","ccclass","property","Lesson29_","setupAppearance","streak","texture","trailTexture","stroke","color","YELLOW","setupBehavior","fadeTime","minSeg","fastMode","togglePreview","preview","resetTrail","reset","loadTexture","path","load","err","tex","start","scheduleOnce"],"mappings":";;;;;;;;;;;;;;;;AACSA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,Y,OAAAA,Y;AAAcC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,S,OAAAA,S;;;;;iFADhE;;;;;OAEM;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBP,U;AAE9B;AACA;AACA;AACA;;2BAEaQ,S,WADZF,OAAO,CAAC,WAAD,C,UAKHC,QAAQ,CAACL,YAAD,C,UAGRK,QAAQ,CAACJ,SAAD,C,2BARb,MACaK,SADb,SAC+BP,SAD/B,CACyC;AAAA;AAAA;;AAErC;AACA;AAHqC;;AAAA;AAAA;;AASrC;;AAEA;AACA;AACQQ,QAAAA,eAAe,GAAG;AACtB,eAAKC,MAAL,CAAYC,OAAZ,GAAsB,KAAKC,YAA3B,CADsB,CACqB;;AAC3C,eAAKF,MAAL,CAAYG,MAAZ,GAAsB,EAAtB,CAFsB,CAEqB;;AAC3C,eAAKH,MAAL,CAAYI,KAAZ,GAAsBV,KAAK,CAACW,MAA5B,CAHsB,CAGqB;AAC9C,SAjBoC,CAkBrC;;AAEA;AACA;;;AACQC,QAAAA,aAAa,GAAG;AACpB,eAAKN,MAAL,CAAYO,QAAZ,GAAuB,GAAvB,CADoB,CACW;;AAC/B,eAAKP,MAAL,CAAYQ,MAAZ,GAAuB,CAAvB,CAFoB,CAEW;;AAC/B,eAAKR,MAAL,CAAYS,QAAZ,GAAuB,KAAvB,CAHoB,CAGW;AAClC,SA1BoC,CA2BrC;;AAEA;AACA;;;AACQC,QAAAA,aAAa,GAAG;AACpB,eAAKV,MAAL,CAAYW,OAAZ,GAAsB,CAAC,KAAKX,MAAL,CAAYW,OAAnC;AACH,SAjCoC,CAkCrC;;AAEA;AACA;;;AACQC,QAAAA,UAAU,GAAG;AACjB,eAAKZ,MAAL,CAAYa,KAAZ;AACH,SAxCoC,CAyCrC;;AAEA;AACA;;;AACQC,QAAAA,WAAW,CAACC,IAAD,EAAe;AAC9BpB,UAAAA,SAAS,CAACqB,IAAV,CAAeD,IAAf,EAAqBtB,SAArB,EAAgC,CAACwB,GAAD,EAAMC,GAAN,KAAc;AAC1C,gBAAI,CAACD,GAAL,EAAU,KAAKjB,MAAL,CAAYC,OAAZ,GAAsBiB,GAAtB;AACb,WAFD;AAGH,SAjDoC,CAkDrC;;AAEA;AACA;;;AACUC,QAAAA,KAAK,GAAG;AACd,cAAI,CAAC,KAAKnB,MAAV,EAAkB;AAClB,eAAKD,eAAL;AACA,eAAKO,aAAL;AACA,eAAKc,YAAL,CAAkB,MAAM,KAAKR,UAAL,EAAxB,EAA2C,CAA3C,EAJc,CAIiC;AAClD,SA3DoC,CA4DrC;;;AA5DqC,O;;;;;iBAKd,I;;;;;;;iBAGG,I","sourcesContent":["// Lesson29_.ts\r\nimport { _decorator, Component, MotionStreak, Texture2D, Color, resources } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\n/**\r\n * MotionStreak（运动拖尾）API 全功能演示\r\n * 核心类：Lesson29_\r\n */\r\n@ccclass('Lesson29_')\r\nexport class Lesson29_ extends Component {\r\n\r\n    /* ------------------ 1. 组件声明 ------------------ */\r\n    //#region 1. 组件声明\r\n    @property(MotionStreak)\r\n    streak: MotionStreak = null!;\r\n\r\n    @property(Texture2D)\r\n    trailTexture: Texture2D = null!;\r\n    //#endregion\r\n\r\n    /* ------------------ 2. 基础外观设置 ------------------ */\r\n    //#region 2. 外观设置\r\n    private setupAppearance() {\r\n        this.streak.texture = this.trailTexture;   // 拖尾贴图\r\n        this.streak.stroke  = 32;                  // 宽度\r\n        this.streak.color   = Color.YELLOW;        // 颜色\r\n    }\r\n    //#endregion\r\n\r\n    /* ------------------ 3. 拖尾行为参数 ------------------ */\r\n    //#region 3. 行为参数\r\n    private setupBehavior() {\r\n        this.streak.fadeTime = 1.5;    // 渐隐时间\r\n        this.streak.minSeg   = 3;      // 最小顶点间距\r\n        this.streak.fastMode = false;  // 高精度模式\r\n    }\r\n    //#endregion\r\n\r\n    /* ------------------ 4. 编辑器预览 ------------------ */\r\n    //#region 4. 编辑器预览\r\n    private togglePreview() {\r\n        this.streak.preview = !this.streak.preview;\r\n    }\r\n    //#endregion\r\n\r\n    /* ------------------ 5. 动态重置拖尾 ------------------ */\r\n    //#region 5. 重置\r\n    private resetTrail() {\r\n        this.streak.reset();\r\n    }\r\n    //#endregion\r\n\r\n    /* ------------------ 6. 运行时动态贴图 ------------------ */\r\n    //#region 6. 动态贴图\r\n    private loadTexture(path: string) {\r\n        resources.load(path, Texture2D, (err, tex) => {\r\n            if (!err) this.streak.texture = tex;\r\n        });\r\n    }\r\n    //#endregion\r\n\r\n    /* ------------------ 7. 生命周期 ------------------ */\r\n    //#region 7. 生命周期\r\n    protected start() {\r\n        if (!this.streak) return;\r\n        this.setupAppearance();\r\n        this.setupBehavior();\r\n        this.scheduleOnce(() => this.resetTrail(), 2); // 2 秒后重置\r\n    }\r\n    //#endregion\r\n}"]}