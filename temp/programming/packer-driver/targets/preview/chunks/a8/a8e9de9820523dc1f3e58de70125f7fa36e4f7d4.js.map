{"version":3,"sources":["file:///G:/CocosProjects/Cocos-Learning/assets/Scripts/Cocos%E6%A0%B8%E5%BF%83/2D%20%E5%AF%B9%E8%B1%A1/UI%E7%B3%BB%E7%BB%9F/UI%E7%BB%84%E4%BB%B6/Lesson32_Widget.ts"],"names":["_decorator","Component","Widget","sys","log","view","ccclass","property","Lesson32_Widget","type","addWidget","widget","getComponent","addComponent","setBasicAlignment","w","isAlignHorizontalCenter","horizontalCenter","isAlignVerticalCenter","verticalCenter","isAlignTop","top","isAlignBottom","isAlignLeft","left","isAlignRight","updateAlignment","stretchToParent","right","bottom","isStretchWidth","isStretchHeight","mixPixelPercent","isAbsoluteLeft","isAbsoluteRight","isAbsoluteVerticalCenter","alignToCustomTarget","target","node","parent","getChildByName","updateByScreenSize","visible","getVisibleSize","width","onLoad","start","isMobile","onEnable","onDisable"],"mappings":";;;;;;;;;;;;;;;;AAESA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,M,OAAAA,M;AAA2BC,MAAAA,G,OAAAA,G;AAAKC,MAAAA,G,OAAAA,G;AAAKC,MAAAA,I,OAAAA,I;;;;;uFAFrE;;;;;OAGM;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBP,U;AAE9B;AACA;AACA;AACA;;iCAEaQ,e,WADZF,OAAO,CAAC,iBAAD,C,UAKHC,QAAQ,CAAC;AAAEE,QAAAA,IAAI,EAAEP;AAAR,OAAD,C,2BALb,MACaM,eADb,SACqCP,SADrC,CAC+C;AAAA;AAAA;;AAE3C;AACA;AAH2C;AAAA;;AAO3C;AACAS,QAAAA,SAAS,GAAG;AACR;AACA,cAAIC,MAAM,GAAG,KAAKC,YAAL,CAAkBV,MAAlB,CAAb;;AACA,cAAI,CAACS,MAAL,EAAa;AACT;AACAA,YAAAA,MAAM,GAAG,KAAKE,YAAL,CAAkBX,MAAlB,CAAT;AACAE,YAAAA,GAAG,CAAC,iBAAD,CAAH;AACH;;AACD,iBAAOO,MAAP;AACH,SAjB0C,CAkB3C;;AAEA;AACA;;;AACAG,QAAAA,iBAAiB,GAAG;AAChB,cAAMC,CAAC,GAAG,KAAKJ,MAAL,IAAe,KAAKD,SAAL,EAAzB;AACA,cAAI,CAACK,CAAL,EAAQ,OAFQ,CAIhB;;AACAA,UAAAA,CAAC,CAACC,uBAAF,GAA4B,IAA5B;AACAD,UAAAA,CAAC,CAACE,gBAAF,GAAqB,CAArB;AAEAF,UAAAA,CAAC,CAACG,qBAAF,GAA4B,IAA5B;AACAH,UAAAA,CAAC,CAACI,cAAF,GAAqB,CAArB,CATgB,CAWhB;;AACAJ,UAAAA,CAAC,CAACK,UAAF,GAAkB,IAAlB;AACAL,UAAAA,CAAC,CAACM,GAAF,GAAW,EAAX,CAbgB,CAaQ;;AACxBN,UAAAA,CAAC,CAACO,aAAF,GAAkB,KAAlB;AAEAP,UAAAA,CAAC,CAACQ,WAAF,GAAkB,IAAlB;AACAR,UAAAA,CAAC,CAACS,IAAF,GAAW,EAAX,CAjBgB,CAiBQ;;AACxBT,UAAAA,CAAC,CAACU,YAAF,GAAkB,KAAlB,CAlBgB,CAoBhB;;AACAV,UAAAA,CAAC,CAACW,eAAF;AACH,SA5C0C,CA6C3C;;AAEA;AACA;;;AACAC,QAAAA,eAAe,GAAG;AACd,cAAMZ,CAAC,GAAG,KAAKJ,MAAL,IAAe,KAAKD,SAAL,EAAzB;AACA,cAAI,CAACK,CAAL,EAAQ,OAFM,CAId;;AACAA,UAAAA,CAAC,CAACQ,WAAF,GAAiB,IAAjB;AACAR,UAAAA,CAAC,CAACS,IAAF,GAAW,CAAX;AACAT,UAAAA,CAAC,CAACU,YAAF,GAAiB,IAAjB;AACAV,UAAAA,CAAC,CAACa,KAAF,GAAW,CAAX,CARc,CAUd;;AACAb,UAAAA,CAAC,CAACK,UAAF,GAAkB,IAAlB;AACAL,UAAAA,CAAC,CAACM,GAAF,GAAW,CAAX;AACAN,UAAAA,CAAC,CAACO,aAAF,GAAkB,IAAlB;AACAP,UAAAA,CAAC,CAACc,MAAF,GAAW,CAAX,CAdc,CAgBd;;AACAzB,UAAAA,GAAG,CAAC,WAAD,EAAcW,CAAC,CAACe,cAAhB,CAAH;AACA1B,UAAAA,GAAG,CAAC,WAAD,EAAcW,CAAC,CAACgB,eAAhB,CAAH;AAEAhB,UAAAA,CAAC,CAACW,eAAF;AACH,SAtE0C,CAuE3C;;AAEA;AACA;;;AACAM,QAAAA,eAAe,GAAG;AACd,cAAMjB,CAAC,GAAG,KAAKJ,MAAL,IAAe,KAAKD,SAAL,EAAzB;AACA,cAAI,CAACK,CAAL,EAAQ,OAFM,CAId;;AACAA,UAAAA,CAAC,CAACQ,WAAF,GAAgB,IAAhB;AACAR,UAAAA,CAAC,CAACkB,cAAF,GAAmB,KAAnB,CANc,CAMY;;AAC1BlB,UAAAA,CAAC,CAACS,IAAF,GAAS,GAAT,CAPc,CAOY;AAE1B;;AACAT,UAAAA,CAAC,CAACU,YAAF,GAAiB,IAAjB;AACAV,UAAAA,CAAC,CAACmB,eAAF,GAAoB,IAApB,CAXc,CAWY;;AAC1BnB,UAAAA,CAAC,CAACa,KAAF,GAAU,EAAV,CAZc,CAcd;;AACAb,UAAAA,CAAC,CAACG,qBAAF,GAA0B,IAA1B;AACAH,UAAAA,CAAC,CAACoB,wBAAF,GAA6B,IAA7B;AACApB,UAAAA,CAAC,CAACI,cAAF,GAAmB,CAAnB;AAEAJ,UAAAA,CAAC,CAACW,eAAF;AACH,SA/F0C,CAgG3C;;AAEA;AACA;;;AACAU,QAAAA,mBAAmB,GAAG;AAAA;;AAClB,cAAMrB,CAAC,GAAG,KAAKJ,MAAL,IAAe,KAAKD,SAAL,EAAzB;AACA,cAAI,CAACK,CAAL,EAAQ,OAFU,CAIlB;;AACA,cAAMsB,MAAM,wBAAG,KAAKC,IAAL,CAAUC,MAAb,qBAAG,kBAAkBC,cAAlB,CAAiC,cAAjC,CAAf;;AACA,cAAIH,MAAJ,EAAY;AACRtB,YAAAA,CAAC,CAACsB,MAAF,GAAWA,MAAX,CADQ,CAGR;;AACAtB,YAAAA,CAAC,CAACU,YAAF,GAAkB,IAAlB;AACAV,YAAAA,CAAC,CAACa,KAAF,GAAW,CAAX;AACAb,YAAAA,CAAC,CAACO,aAAF,GAAkB,IAAlB;AACAP,YAAAA,CAAC,CAACc,MAAF,GAAW,CAAX;AAEAd,YAAAA,CAAC,CAACW,eAAF;AACH;AACJ,SArH0C,CAsH3C;;AAEA;AACA;;;AACAe,QAAAA,kBAAkB,GAAG;AACjB,cAAM1B,CAAC,GAAG,KAAKJ,MAAL,IAAe,KAAKD,SAAL,EAAzB;AACA,cAAI,CAACK,CAAL,EAAQ;AAER,cAAM2B,OAAO,GAAGrC,IAAI,CAACsC,cAAL,EAAhB;;AACA,cAAID,OAAO,CAACE,KAAR,GAAgB,GAApB,EAAyB;AACrB;AACA7B,YAAAA,CAAC,CAACS,IAAF,GAAST,CAAC,CAACa,KAAF,GAAU,CAAnB;AACH,WAHD,MAGO;AACH;AACAb,YAAAA,CAAC,CAACS,IAAF,GAAST,CAAC,CAACa,KAAF,GAAU,EAAnB;AACH;;AACDb,UAAAA,CAAC,CAACW,eAAF;AACH,SAvI0C,CAwI3C;;AAEA;AACA;;;AACAmB,QAAAA,MAAM,GAAG;AACL;AACA,eAAK/B,iBAAL;AACH;;AAEDgC,QAAAA,KAAK,GAAG;AACJ;AACA,cAAI3C,GAAG,CAAC4C,QAAR,EAAkB;AACd,iBAAKf,eAAL;AACH;AACJ;;AAEDgB,QAAAA,QAAQ,GAAG,CACP;AACA;AACH;;AAEDC,QAAAA,SAAS,GAAG,CACR;AACH,SA/J0C,CAgK3C;;;AAhK2C,O;;;;;iBAKnB,I","sourcesContent":["// Lesson32_Widget.ts\n\nimport { _decorator, Component, Widget, Node, UITransform, sys, log, view } from 'cc';\nconst { ccclass, property } = _decorator;\n\n/**\n * 演示 Cocos Creator 3.8 Widget 组件的常见 API 用法\n * 按功能划分为不同折叠块，便于查阅\n */\n@ccclass('Lesson32_Widget')\nexport class Lesson32_Widget extends Component {\n\n    /* ========================= 1. 获取/添加 Widget 组件 ========================= */\n    // #region 获取/添加 Widget 组件\n    @property({ type: Widget })\n    widget: Widget | null = null;\n\n    /** 运行时动态添加/获取 Widget */\n    addWidget() {\n        // 方式1：直接获取\n        let widget = this.getComponent(Widget);\n        if (!widget) {\n            // 方式2：动态添加\n            widget = this.addComponent(Widget);\n            log('已动态添加 Widget 组件');\n        }\n        return widget;\n    }\n    // #endregion\n\n    /* ========================= 2. 基础对齐设置 ========================= */\n    // #region 基础对齐\n    setBasicAlignment() {\n        const w = this.widget || this.addWidget();\n        if (!w) return;\n\n        // 居中\n        w.isAlignHorizontalCenter = true;\n        w.horizontalCenter = 0;\n\n        w.isAlignVerticalCenter   = true;\n        w.verticalCenter   = 0;\n\n        // 贴边\n        w.isAlignTop    = true;\n        w.top    = 20;          // 距离顶部 20px\n        w.isAlignBottom = false;\n\n        w.isAlignLeft   = true;\n        w.left   = 10;          // 距离左侧 10px\n        w.isAlignRight  = false;\n\n        // 立即刷新（下一帧才生效，除非手动调用）\n        w.updateAlignment();\n    }\n    // #endregion\n\n    /* ========================= 3. 拉伸适配 ========================= */\n    // #region 拉伸适配\n    stretchToParent() {\n        const w = this.widget || this.addWidget();\n        if (!w) return;\n\n        // 水平拉伸\n        w.isAlignLeft  = true;\n        w.left   = 0;\n        w.isAlignRight = true;\n        w.right  = 0;\n\n        // 垂直拉伸\n        w.isAlignTop    = true;\n        w.top    = 0;\n        w.isAlignBottom = true;\n        w.bottom = 0;\n\n        // 检查拉伸状态\n        log('当前是否水平拉伸:', w.isStretchWidth);\n        log('当前是否垂直拉伸:', w.isStretchHeight);\n\n        w.updateAlignment();\n    }\n    // #endregion\n\n    /* ========================= 4. 百分比/像素混合 ========================= */\n    // #region 百分比/像素混合\n    mixPixelPercent() {\n        const w = this.widget || this.addWidget();\n        if (!w) return;\n\n        // 左侧 10% 边距\n        w.isAlignLeft = true;\n        w.isAbsoluteLeft = false; // 使用百分比\n        w.left = 0.1;             // 10%\n\n        // 右侧固定 20px\n        w.isAlignRight = true;\n        w.isAbsoluteRight = true; // 使用像素\n        w.right = 20;\n\n        // 垂直居中\n        w.isAlignVerticalCenter = true;\n        w.isAbsoluteVerticalCenter = true;\n        w.verticalCenter = 0;\n\n        w.updateAlignment();\n    }\n    // #endregion\n\n    /* ========================= 5. 指定对齐目标 ========================= */\n    // #region 指定对齐目标\n    alignToCustomTarget() {\n        const w = this.widget || this.addWidget();\n        if (!w) return;\n\n        // 假设场景中有一个名为 \"CustomTarget\" 的节点\n        const target = this.node.parent?.getChildByName('CustomTarget');\n        if (target) {\n            w.target = target;\n\n            // 相对于目标节点右下对齐\n            w.isAlignRight  = true;\n            w.right  = 0;\n            w.isAlignBottom = true;\n            w.bottom = 0;\n\n            w.updateAlignment();\n        }\n    }\n    // #endregion\n\n    /* ========================= 6. 运行时动态更新 ========================= */\n    // #region 运行时动态更新\n    updateByScreenSize() {\n        const w = this.widget || this.addWidget();\n        if (!w) return;\n\n        const visible = view.getVisibleSize();\n        if (visible.width < 720) {\n            // 小屏：缩小边距\n            w.left = w.right = 5;\n        } else {\n            // 大屏：放大边距\n            w.left = w.right = 30;\n        }\n        w.updateAlignment();\n    }\n    // #endregion\n\n    /* ========================= 7. 生命周期示例 ========================= */\n    // #region 生命周期\n    onLoad() {\n        // 初始化一次\n        this.setBasicAlignment();\n    }\n\n    start() {\n        // 根据平台差异化处理\n        if (sys.isMobile) {\n            this.mixPixelPercent();\n        }\n    }\n\n    onEnable() {\n        // 注册窗口大小改变事件（如需）\n        // view.on('design-resolution-changed', this.updateByScreenSize, this);\n    }\n\n    onDisable() {\n        // view.off('design-resolution-changed', this.updateByScreenSize, this);\n    }\n    // #endregion\n}"]}