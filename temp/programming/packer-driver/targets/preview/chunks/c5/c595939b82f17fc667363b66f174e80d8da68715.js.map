{"version":3,"sources":["file:///G:/CocosProjects/Cocos-Learning/assets/Scripts/Cocos%E6%A0%B8%E5%BF%83/2D%20%E5%AF%B9%E8%B1%A1/UI%E7%B3%BB%E7%BB%9F/UI%E7%BB%84%E4%BB%B6/Lesson46_UIMeshRenderer.ts"],"names":["_decorator","Component","UIMeshRenderer","log","ccclass","property","Lesson46_UIMeshRenderer","type","getOrCreateUIMeshRenderer","umr","uiMeshRenderer","getComponent","addComponent","setModelComponent","modelComponent","node","setStencilStage","stencilStage","callPostUpdateAssembler","postUpdateAssembler","onLoad"],"mappings":";;;;;;;;;;;;;;;;AAESA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,c,OAAAA,c;AAAgBC,MAAAA,G,OAAAA,G;;;;;+FAFhD;;;;;OAGM;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBL,U;AAE9B;AACA;AACA;AACA;AACA;;yCAEaM,uB,WADZF,OAAO,CAAC,yBAAD,C,UAKHC,QAAQ,CAAC;AAAEE,QAAAA,IAAI,EAAEL;AAAR,OAAD,C,2BALb,MACaI,uBADb,SAC6CL,SAD7C,CACuD;AAAA;AAAA;;AAEnD;AACA;AAHmD;AAAA;;AAOnD;AACAO,QAAAA,yBAAyB,GAA0B;AAAA;;AAC/C,cAAIC,GAAG,2BAAG,KAAKC,cAAR,mCAA0B,KAAKC,YAAL,CAAkBT,cAAlB,CAAjC;;AACA,cAAI,CAACO,GAAL,EAAU;AACNA,YAAAA,GAAG,GAAG,KAAKG,YAAL,CAAkBV,cAAlB,CAAN;AACAC,YAAAA,GAAG,CAAC,wBAAD,CAAH;AACH;;AACD,iBAAOM,GAAP;AACH,SAfkD,CAgBnD;;AAEA;AACA;;;AACAI,QAAAA,iBAAiB,GAAG;AAChB,cAAMJ,GAAG,GAAG,KAAKD,yBAAL,EAAZ;AACA,cAAI,CAACC,GAAL,EAAU,OAFM,CAIhB;;AACA,cAAMK,cAAc,GAAG,KAAKC,IAAL,CAAUJ,YAAV,CAAuB,cAAvB,CAAvB;;AACA,cAAIG,cAAJ,EAAoB;AAChB;AACAX,YAAAA,GAAG,CAAC,SAAD,CAAH;AACH,WAHD,MAGO;AACHA,YAAAA,GAAG,CAAC,SAAD,CAAH;AACH;AACJ,SAhCkD,CAiCnD;;AAEA;AACA;;;AACAa,QAAAA,eAAe,GAAG;AACd,cAAMP,GAAG,GAAG,KAAKD,yBAAL,EAAZ;AACA,cAAI,CAACC,GAAL,EAAU,OAFI,CAId;;AACAA,UAAAA,GAAG,CAACQ,YAAJ,GAAmB,CAAnB;AACAd,UAAAA,GAAG,CAAC,SAAD,CAAH;AACH,SA5CkD,CA6CnD;;AAEA;AACA;;AACA;;;AACAe,QAAAA,uBAAuB,GAAG;AACtB,cAAMT,GAAG,GAAG,KAAKD,yBAAL,EAAZ;AACA,cAAI,CAACC,GAAL,EAAU,OAFY,CAItB;;AACAA,UAAAA,GAAG,CAACU,mBAAJ,CAAwB,IAAxB;AACH,SAxDkD,CAyDnD;;AAEA;AACA;;;AACAC,QAAAA,MAAM,GAAG;AACL,eAAKP,iBAAL,GADK,CACqB;;AAC1B,eAAKG,eAAL,GAFK,CAEqB;AAC7B;;AAhEkD,O;;;;;iBAKX,I","sourcesContent":["// Lesson46_UIMeshRenderer.ts\n\nimport { _decorator, Component, UIMeshRenderer, log } from 'cc';\nconst { ccclass, property } = _decorator;\n\n/**\n * Lesson46_UIMeshRenderer\n * 演示 Cocos Creator 3.8 UIMeshRenderer 组件的常见 API 用法\n * 注意：该组件已被标记为不推荐使用，请尽量使用 Render Texture 代替\n */\n@ccclass('Lesson46_UIMeshRenderer')\nexport class Lesson46_UIMeshRenderer extends Component {\n\n    /* ========================= 1. 获取/创建 UIMeshRenderer 组件 ========================= */\n    // #region 获取/创建 UIMeshRenderer\n    @property({ type: UIMeshRenderer })\n    uiMeshRenderer: UIMeshRenderer | null = null;\n\n    /** 运行时动态创建或获取 UIMeshRenderer 组件 */\n    getOrCreateUIMeshRenderer(): UIMeshRenderer | null {\n        let umr = this.uiMeshRenderer ?? this.getComponent(UIMeshRenderer);\n        if (!umr) {\n            umr = this.addComponent(UIMeshRenderer);\n            log('动态添加 UIMeshRenderer 组件');\n        }\n        return umr;\n    }\n    // #endregion\n\n    /* ========================= 2. 设置模型组件 ========================= */\n    // #region 设置模型组件\n    setModelComponent() {\n        const umr = this.getOrCreateUIMeshRenderer();\n        if (!umr) return;\n\n        // 假设节点上已经有一个模型组件\n        const modelComponent = this.node.getComponent('MeshRenderer');\n        if (modelComponent) {\n            //umr.modelComponent = modelComponent;\n            log('模型组件已设置');\n        } else {\n            log('未找到模型组件');\n        }\n    }\n    // #endregion\n\n    /* ========================= 3. 设置模板阶段 ========================= */\n    // #region 设置模板阶段\n    setStencilStage() {\n        const umr = this.getOrCreateUIMeshRenderer();\n        if (!umr) return;\n\n        // 设置模板阶段（示例值）\n        umr.stencilStage = 1;\n        log('模板阶段已设置');\n    }\n    // #endregion\n\n    /* ========================= 4. 渲染相关方法（不推荐手动调用） ========================= */\n    // #region 渲染相关方法\n    /** 调用后置渲染数据组装程序（不推荐手动调用） */\n    callPostUpdateAssembler() {\n        const umr = this.getOrCreateUIMeshRenderer();\n        if (!umr) return;\n\n        // 注意：不推荐手动调用此方法，除非你理解整个流程\n        umr.postUpdateAssembler(null);\n    }\n    // #endregion\n\n    /* ========================= 5. 生命周期示例 ========================= */\n    // #region 生命周期\n    onLoad() {\n        this.setModelComponent(); // 设置模型组件\n        this.setStencilStage();   // 设置模板阶段\n    }\n}"]}