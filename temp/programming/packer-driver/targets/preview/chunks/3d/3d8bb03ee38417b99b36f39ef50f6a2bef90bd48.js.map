{"version":3,"sources":["file:///G:/CocosProjects/Cocos-Learning/assets/Scripts/Cocos%E5%9F%BA%E7%A1%80/%E8%84%9A%E6%9C%AC%E6%8C%87%E5%8D%97%E5%8F%8A%E4%BA%8B%E4%BB%B6%E6%9C%BA%E5%88%B6/%E4%BA%8B%E4%BB%B6%E7%B3%BB%E7%BB%9F/Lesson13_.ts"],"names":["_decorator","Component","EventTarget","ccclass","Lesson13_","eventTarget","registerOn","on","msg","console","log","node","name","a","b","bind","registerOnce","once","_sayHello","onEnable","onDisable","off","clearAll","targetOff","emitEvents","emit","start","onDestroy"],"mappings":";;;;;;;;;;AACSA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,W,OAAAA,W;;;;;iFADhC;;;;;OAEM;AAAEC,QAAAA;AAAF,O,GAAcH,U;AAEpB;AACA;AACA;AACA;;2BAEaI,S,WADZD,OAAO,CAAC,WAAD,C,gBAAR,MACaC,SADb,SAC+BH,SAD/B,CACyC;AAAA;AAAA;;AAErC;AACA;AAHqC,eAIpBI,WAJoB,GAIN,IAAIH,WAAJ,EAJM;AAAA;;AAKrC;;AAEA;AACA;AACQI,QAAAA,UAAU,GAAG;AACjB;AACA,eAAKD,WAAL,CAAiBE,EAAjB,CAAoB,OAApB,EAA8BC,GAAD,IAAiB;AAC1CC,YAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ,EAA8BF,GAA9B,EAAmC,KAAKG,IAAL,CAAUC,IAA7C;AACH,WAFD,EAEG,IAFH,EAFiB,CAMjB;;AACA,eAAKP,WAAL,CAAiBE,EAAjB,CAAoB,KAApB,EAA2B,UAAUM,CAAV,EAAqBC,CAArB,EAAgC;AACvDL,YAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA4BG,CAAC,GAAGC,CAAhC,EAAmC,KAAKH,IAAL,CAAUC,IAA7C;AACH,WAF0B,CAEzBG,IAFyB,CAEpB,IAFoB,CAA3B;AAGH,SAnBoC,CAoBrC;;AAEA;AACA;;;AACQC,QAAAA,YAAY,GAAG;AACnB,eAAKX,WAAL,CAAiBY,IAAjB,CAAsB,WAAtB,EAAmC,MAAM;AACrCR,YAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACH,WAFD,EAEG,IAFH;AAGH,SA5BoC,CA6BrC;;AAEA;AACA;;;AACQQ,QAAAA,SAAS,GAAG;AAChBT,UAAAA,OAAO,CAACC,GAAR,CAAY,wBAAZ;AACH;;AAESS,QAAAA,QAAQ,GAAG;AACjB;AACA,eAAKd,WAAL,CAAiBE,EAAjB,CAAoB,QAApB,EAA8B,KAAKW,SAAnC,EAA8C,IAA9C;AACH;;AAESE,QAAAA,SAAS,GAAG;AAClB;AACA,eAAKf,WAAL,CAAiBgB,GAAjB,CAAqB,QAArB,EAA+B,KAAKH,SAApC,EAA+C,IAA/C;AACH;AAED;;;AACQI,QAAAA,QAAQ,GAAG;AACf,eAAKjB,WAAL,CAAiBkB,SAAjB,CAA2B,IAA3B,EADe,CACmB;AACrC,SAlDoC,CAmDrC;;AAEA;AACA;;;AACQC,QAAAA,UAAU,GAAG;AACjB;AACA,eAAKnB,WAAL,CAAiBoB,IAAjB,CAAsB,OAAtB,EAA+B,aAA/B,EAFiB,CAIjB;;AACA,eAAKpB,WAAL,CAAiBoB,IAAjB,CAAsB,KAAtB,EAA6B,CAA7B,EAAgC,CAAhC,EALiB,CAOjB;;AACA,eAAKpB,WAAL,CAAiBoB,IAAjB,CAAsB,WAAtB;AACA,eAAKpB,WAAL,CAAiBoB,IAAjB,CAAsB,WAAtB,EATiB,CASmB;AACvC,SAjEoC,CAkErC;;AAEA;AACA;;;AACUC,QAAAA,KAAK,GAAG;AACd,eAAKpB,UAAL;AACA,eAAKU,YAAL;AACA,eAAKQ,UAAL;AACH;;AAESG,QAAAA,SAAS,GAAG;AAClB,eAAKL,QAAL;AACH,SA9EoC,CA+ErC;;;AA/EqC,O","sourcesContent":["// Lesson13_.ts\nimport { _decorator, Component, EventTarget } from 'cc';\nconst { ccclass } = _decorator;\n\n/**\n * 事件监听与发射完整示例\n * 核心类：Lesson13_\n */\n@ccclass('Lesson13_')\nexport class Lesson13_ extends Component {\n\n    /* ------------------ 1. 创建全局事件目标 ------------------ */\n    //#region 1. 创建 EventTarget\n    private readonly eventTarget = new EventTarget();\n    //#endregion\n\n    /* ------------------ 2. 常规监听（on） ------------------ */\n    //#region 2. on 监听\n    private registerOn() {\n        // 方式 A：箭头函数 + 第三个参数指定 this\n        this.eventTarget.on('hello', (msg: string) => {\n            console.log('[on] 收到 hello：', msg, this.node.name);\n        }, this);\n\n        // 方式 B：bind(this)\n        this.eventTarget.on('add', function (a: number, b: number) {\n            console.log('[on] add 结果：', a + b, this.node.name);\n        }.bind(this));\n    }\n    //#endregion\n\n    /* ------------------ 3. 一次性监听（once） ------------------ */\n    //#region 3. once 监听\n    private registerOnce() {\n        this.eventTarget.once('once-only', () => {\n            console.log('[once] 只会触发一次');\n        }, this);\n    }\n    //#endregion\n\n    /* ------------------ 4. 取消监听（off） ------------------ */\n    //#region 4. 取消监听\n    private _sayHello() {\n        console.log('[callback] Hello World');\n    }\n\n    protected onEnable() {\n        // 注册\n        this.eventTarget.on('foobar', this._sayHello, this);\n    }\n\n    protected onDisable() {\n        // 精确取消\n        this.eventTarget.off('foobar', this._sayHello, this);\n    }\n\n    /** 演示全部清空 */\n    private clearAll() {\n        this.eventTarget.targetOff(this); // 或 eventTarget.off('事件名');\n    }\n    //#endregion\n\n    /* ------------------ 5. 事件发射（emit） ------------------ */\n    //#region 5. 发射事件\n    private emitEvents() {\n        // 发射 hello\n        this.eventTarget.emit('hello', '来自 emit 的问候');\n\n        // 发射 add（最多 5 个参数）\n        this.eventTarget.emit('add', 3, 7);\n\n        // 触发 once-only\n        this.eventTarget.emit('once-only');\n        this.eventTarget.emit('once-only'); // 第二次无效\n    }\n    //#endregion\n\n    /* ------------------ 6. 生命周期 ------------------ */\n    //#region 6. 生命周期\n    protected start() {\n        this.registerOn();\n        this.registerOnce();\n        this.emitEvents();\n    }\n\n    protected onDestroy() {\n        this.clearAll();\n    }\n    //#endregion\n}"]}