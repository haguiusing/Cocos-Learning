{"version":3,"sources":["file:///G:/CocosProjects/Cocos-Learning/assets/Scripts/Cocos%E6%A0%B8%E5%BF%83/2D%20%E5%AF%B9%E8%B1%A1/UI%E7%B3%BB%E7%BB%9F/UI%E7%BB%84%E4%BB%B6/Lesson30_Canvas.ts"],"names":["_decorator","Component","Canvas","view","log","find","ResolutionPolicy","ccclass","property","Lesson30_Canvas","type","getCanvasByInspector","canvas","name","getCanvasByCode","node","getComponent","canvasNode","canvasComp","adjustScreenFit","getCanvasComponent","visibleSize","getVisibleSize","setDesignResolutionSize","FIXED_WIDTH","setRenderMode","camera","cameraComponent","priority","onLoad","start"],"mappings":";;;;;;;;;;;;;;;;AAESA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,M,OAAAA,M;AAAcC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,G,OAAAA,G;AAAKC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,gB,OAAAA,gB;;;;;uFAF/D;;;;;OAGM;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBR,U;AAE9B;AACA;AACA;AACA;;iCAEaS,e,WADZF,OAAO,CAAC,iBAAD,C,UAKHC,QAAQ,CAAC;AAAEE,QAAAA,IAAI,EAAER;AAAR,OAAD,C,2BALb,MACaO,eADb,SACqCR,SADrC,CAC+C;AAAA;AAAA;;AAE3C;AACA;AAH2C;AAAA;;AAO3C;AACAU,QAAAA,oBAAoB,GAAG;AACnB,cAAI,KAAKC,MAAT,EAAiB;AACbR,YAAAA,GAAG,CAAC,2BAAD,EAA8B,KAAKQ,MAAL,CAAYC,IAA1C,CAAH;AACH;AACJ;AAED;;;AACAC,QAAAA,eAAe,GAAG;AACd;AACA,cAAMF,MAAM,GAAG,KAAKG,IAAL,CAAUC,YAAV,CAAuBd,MAAvB,CAAf,CAFc,CAGd;;AACA,cAAMe,UAAU,GAAGZ,IAAI,CAAC,QAAD,CAAvB;AACA,cAAMa,UAAU,GAAGD,UAAH,oBAAGA,UAAU,CAAED,YAAZ,CAAyBd,MAAzB,CAAnB;;AAEA,cAAIgB,UAAJ,EAAgB;AACZd,YAAAA,GAAG,CAAC,kBAAD,EAAqBc,UAAU,CAACL,IAAhC,CAAH;AACH;AACJ,SAzB0C,CA0B3C;;AAEA;AACA;;;AACAM,QAAAA,eAAe,GAAG;AACd,cAAMP,MAAM,GAAG,KAAKQ,kBAAL,EAAf;AACA,cAAI,CAACR,MAAL,EAAa,OAFC,CAId;;AACA,cAAMS,WAAW,GAAGlB,IAAI,CAACmB,cAAL,EAApB;AACAlB,UAAAA,GAAG,CAAC,SAAD,EAAYiB,WAAZ,CAAH,CANc,CAQd;;AACAlB,UAAAA,IAAI,CAACoB,uBAAL,CAA6B,IAA7B,EAAmC,IAAnC,EAAyCjB,gBAAgB,CAACkB,WAA1D;AACApB,UAAAA,GAAG,CAAC,qBAAD,CAAH,CAVc,CAYd;AACA;AACH,SA5C0C,CA6C3C;;AAEA;AACA;;;AACAqB,QAAAA,aAAa,GAAG;AACZ,cAAMb,MAAM,GAAG,KAAKQ,kBAAL,EAAf;AACA,cAAI,CAACR,MAAL,EAAa,OAFD,CAIZ;AACA;;AACA,cAAMc,MAAM,GAAGd,MAAM,CAACe,eAAtB;;AACA,cAAID,MAAJ,EAAY;AACRtB,YAAAA,GAAG,CAAC,UAAD,EAAasB,MAAM,CAACE,QAApB,CAAH,CADQ,CAER;;AACAF,YAAAA,MAAM,CAACE,QAAP,GAAkB,GAAlB;AACH;AACJ,SA7D0C,CA8D3C;;AAEA;AACA;;;AACAC,QAAAA,MAAM,GAAG;AACL,eAAKlB,oBAAL;AACH;;AAEDmB,QAAAA,KAAK,GAAG;AACJ,eAAKhB,eAAL;AACA,eAAKK,eAAL;AACA,eAAKM,aAAL;AACH,SA1E0C,CA2E3C;;AAEA;AACA;;;AACQL,QAAAA,kBAAkB,GAAkB;AAAA;;AACxC,iBAAO,KAAKR,MAAL,IAAe,KAAKG,IAAL,CAAUC,YAAV,CAAuBd,MAAvB,CAAf,cAAiDG,IAAI,CAAC,QAAD,CAArD,qBAAiD,MAAgBW,YAAhB,CAA6Bd,MAA7B,CAAjD,CAAP;AACH,SAjF0C,CAkF3C;;;AAlF2C,O;;;;;iBAKnB,I","sourcesContent":["// Lesson30_Canvas.ts\n\nimport { _decorator, Component, Canvas, Node, view, log, find, ResolutionPolicy } from 'cc';\nconst { ccclass, property } = _decorator;\n\n/**\n * 演示 Cocos Creator 3.8 Canvas 组件的常见 API 用法\n * 按功能划分为不同折叠块，便于查阅\n */\n@ccclass('Lesson30_Canvas')\nexport class Lesson30_Canvas extends Component {\n\n    /* ========================= 1. 获取 Canvas 组件 ========================= */\n    // #region 获取 Canvas 组件\n    @property({ type: Canvas })\n    canvas: Canvas | null = null;\n\n    /** 方式1：通过 Inspector 拖拽绑定 */\n    getCanvasByInspector() {\n        if (this.canvas) {\n            log('通过 Inspector 获取 Canvas 成功', this.canvas.name);\n        }\n    }\n\n    /** 方式2：运行时动态查找 */\n    getCanvasByCode() {\n        // 方法1：查找当前节点或其父节点\n        const canvas = this.node.getComponent(Canvas);\n        // 方法2：全局查找（推荐）\n        const canvasNode = find('Canvas') as Node;\n        const canvasComp = canvasNode?.getComponent(Canvas);\n        \n        if (canvasComp) {\n            log('通过代码获取 Canvas 成功', canvasComp.name);\n        }\n    }\n    // #endregion\n\n    /* ========================= 2. 屏幕适配相关 ========================= */\n    // #region 屏幕适配\n    adjustScreenFit() {\n        const canvas = this.getCanvasComponent();\n        if (!canvas) return;\n\n        // 获取当前屏幕分辨率\n        const visibleSize = view.getVisibleSize();\n        log('屏幕可见尺寸:', visibleSize);\n\n        // 设置适配策略（示例）\n        view.setDesignResolutionSize(1080, 1920, ResolutionPolicy.FIXED_WIDTH);\n        log('设计分辨率已调整为 1080x1920');\n\n        // 注意：Canvas 的 alignCanvasWithScreen 属性已废弃\n        // 应通过 Canvas 组件的 cameraComponent 或 RenderRoot2D 设置\n    }\n    // #endregion\n\n    /* ========================= 3. 渲染模式控制 ========================= */\n    // #region 渲染模式\n    setRenderMode() {\n        const canvas = this.getCanvasComponent();\n        if (!canvas) return;\n\n        // 获取渲染模式（已废弃，仅作演示）\n        // 推荐使用 camera 的 priority 控制渲染顺序\n        const camera = canvas.cameraComponent;\n        if (camera) {\n            log('当前相机优先级:', camera.priority);\n            // 设置相机优先级（值越大越后渲染）\n            camera.priority = 100;\n        }\n    }\n    // #endregion\n\n    /* ========================= 4. 生命周期方法 ========================= */\n    // #region 生命周期\n    onLoad() {\n        this.getCanvasByInspector();\n    }\n\n    start() {\n        this.getCanvasByCode();\n        this.adjustScreenFit();\n        this.setRenderMode();\n    }\n    // #endregion\n\n    /* ========================= 5. 工具方法 ========================= */\n    // #region 工具方法\n    private getCanvasComponent(): Canvas | null {\n        return this.canvas || this.node.getComponent(Canvas) || find('Canvas')?.getComponent(Canvas);\n    }\n    // #endregion\n}"]}