{"version":3,"sources":["file:///G:/CocosProjects/Cocos-Learning/assets/Scripts/Cocos%E6%A0%B8%E5%BF%83/2D%20%E5%AF%B9%E8%B1%A1/2D%20%E6%B8%B2%E6%9F%93/Lesson29_MotionStreak.ts"],"names":["_decorator","Component","MotionStreak","Texture2D","Color","resources","ccclass","property","Lesson29_MotionStreak","setupAppearance","streak","texture","trailTexture","stroke","color","YELLOW","setupBehavior","fadeTime","minSeg","fastMode","togglePreview","preview","resetTrail","reset","loadTexture","path","load","err","tex","start","scheduleOnce"],"mappings":";;;;;;;;;;;;;;;;AACSA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,Y,OAAAA,Y;AAAcC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,S,OAAAA,S;;;;;6FADhE;;;;;OAEM;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBP,U;AAE9B;AACA;AACA;AACA;;uCAEaQ,qB,WADZF,OAAO,CAAC,uBAAD,C,UAKHC,QAAQ,CAACL,YAAD,C,UAGRK,QAAQ,CAACJ,SAAD,C,2BARb,MACaK,qBADb,SAC2CP,SAD3C,CACqD;AAAA;AAAA;;AAEjD;AACA;AAHiD;;AAAA;AAAA;;AASjD;;AAEA;AACA;AACQQ,QAAAA,eAAe,GAAG;AACtB,eAAKC,MAAL,CAAYC,OAAZ,GAAsB,KAAKC,YAA3B,CADsB,CACqB;;AAC3C,eAAKF,MAAL,CAAYG,MAAZ,GAAsB,EAAtB,CAFsB,CAEqB;;AAC3C,eAAKH,MAAL,CAAYI,KAAZ,GAAsBV,KAAK,CAACW,MAA5B,CAHsB,CAGqB;AAC9C,SAjBgD,CAkBjD;;AAEA;AACA;;;AACQC,QAAAA,aAAa,GAAG;AACpB,eAAKN,MAAL,CAAYO,QAAZ,GAAuB,GAAvB,CADoB,CACW;;AAC/B,eAAKP,MAAL,CAAYQ,MAAZ,GAAuB,CAAvB,CAFoB,CAEW;;AAC/B,eAAKR,MAAL,CAAYS,QAAZ,GAAuB,KAAvB,CAHoB,CAGW;AAClC,SA1BgD,CA2BjD;;AAEA;AACA;;;AACQC,QAAAA,aAAa,GAAG;AACpB,eAAKV,MAAL,CAAYW,OAAZ,GAAsB,CAAC,KAAKX,MAAL,CAAYW,OAAnC;AACH,SAjCgD,CAkCjD;;AAEA;AACA;;;AACQC,QAAAA,UAAU,GAAG;AACjB,eAAKZ,MAAL,CAAYa,KAAZ;AACH,SAxCgD,CAyCjD;;AAEA;AACA;;;AACQC,QAAAA,WAAW,CAACC,IAAD,EAAe;AAC9BpB,UAAAA,SAAS,CAACqB,IAAV,CAAeD,IAAf,EAAqBtB,SAArB,EAAgC,CAACwB,GAAD,EAAMC,GAAN,KAAc;AAC1C,gBAAI,CAACD,GAAL,EAAU,KAAKjB,MAAL,CAAYC,OAAZ,GAAsBiB,GAAtB;AACb,WAFD;AAGH,SAjDgD,CAkDjD;;AAEA;AACA;;;AACUC,QAAAA,KAAK,GAAG;AACd,cAAI,CAAC,KAAKnB,MAAV,EAAkB;AAClB,eAAKD,eAAL;AACA,eAAKO,aAAL;AACA,eAAKc,YAAL,CAAkB,MAAM,KAAKR,UAAL,EAAxB,EAA2C,CAA3C,EAJc,CAIiC;AAClD,SA3DgD,CA4DjD;;;AA5DiD,O;;;;;iBAK1B,I;;;;;;;iBAGG,I","sourcesContent":["// Lesson29_.ts\nimport { _decorator, Component, MotionStreak, Texture2D, Color, resources } from 'cc';\nconst { ccclass, property } = _decorator;\n\n/**\n * MotionStreak（运动拖尾）API 全功能演示\n * 核心类：Lesson29_MotionStreak\n */\n@ccclass('Lesson29_MotionStreak')\nexport class Lesson29_MotionStreak extends Component {\n\n    /* ------------------ 1. 组件声明 ------------------ */\n    //#region 1. 组件声明\n    @property(MotionStreak)\n    streak: MotionStreak = null!;\n\n    @property(Texture2D)\n    trailTexture: Texture2D = null!;\n    //#endregion\n\n    /* ------------------ 2. 基础外观设置 ------------------ */\n    //#region 2. 外观设置\n    private setupAppearance() {\n        this.streak.texture = this.trailTexture;   // 拖尾贴图\n        this.streak.stroke  = 32;                  // 宽度\n        this.streak.color   = Color.YELLOW;        // 颜色\n    }\n    //#endregion\n\n    /* ------------------ 3. 拖尾行为参数 ------------------ */\n    //#region 3. 行为参数\n    private setupBehavior() {\n        this.streak.fadeTime = 1.5;    // 渐隐时间\n        this.streak.minSeg   = 3;      // 最小顶点间距\n        this.streak.fastMode = false;  // 高精度模式\n    }\n    //#endregion\n\n    /* ------------------ 4. 编辑器预览 ------------------ */\n    //#region 4. 编辑器预览\n    private togglePreview() {\n        this.streak.preview = !this.streak.preview;\n    }\n    //#endregion\n\n    /* ------------------ 5. 动态重置拖尾 ------------------ */\n    //#region 5. 重置\n    private resetTrail() {\n        this.streak.reset();\n    }\n    //#endregion\n\n    /* ------------------ 6. 运行时动态贴图 ------------------ */\n    //#region 6. 动态贴图\n    private loadTexture(path: string) {\n        resources.load(path, Texture2D, (err, tex) => {\n            if (!err) this.streak.texture = tex;\n        });\n    }\n    //#endregion\n\n    /* ------------------ 7. 生命周期 ------------------ */\n    //#region 7. 生命周期\n    protected start() {\n        if (!this.streak) return;\n        this.setupAppearance();\n        this.setupBehavior();\n        this.scheduleOnce(() => this.resetTrail(), 2); // 2 秒后重置\n    }\n    //#endregion\n}"]}