{"version":3,"sources":["file:///G:/CocosProjects/Cocos-Learning/assets/Scripts/Cocos%E6%A0%B8%E5%BF%83/2D%20%E5%AF%B9%E8%B1%A1/2D%20%E6%B8%B2%E6%9F%93/Lesson21_.ts"],"names":["_decorator","Component","Mask","SpriteFrame","Label","ccclass","property","Lesson21_","setupMaskType","mask","type","Type","GRAPHICS_ELLIPSE","setupEllipse","segments","setupSpriteMask","SPRITE_STENCIL","spriteFrame","maskSprite","alphaThreshold","toggleInverted","inverted","demoDynamicContent","contentLabel","string","schedule","offset","node","position","x","setPosition","start","onDestroy","unscheduleAllCallbacks"],"mappings":";;;;;;;;;;;;;;;;AACSA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,W,OAAAA,W;AAAoBC,MAAAA,K,OAAAA,K;;;;;iFAD1D;;;;;OAEM;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBN,U;AAE9B;AACA;AACA;AACA;;2BAEaO,S,WADZF,OAAO,CAAC,WAAD,C,UAKHC,QAAQ,CAACJ,IAAD,C,UAGRI,QAAQ,CAACH,WAAD,C,UAGRG,QAAQ,CAACF,KAAD,C,2BAXb,MACaG,SADb,SAC+BN,SAD/B,CACyC;AAAA;AAAA;;AAErC;AACA;AAHqC;;AAAA;;AAAA;AAAA;;AAWN;AAC/B;;AAEA;AACA;AACQO,QAAAA,aAAa,GAAG;AACpB;AACA,eAAKC,IAAL,CAAUC,IAAV,GAAiBR,IAAI,CAACS,IAAL,CAAUC,gBAA3B,CAFoB,CAE2B;AAClD,SAnBoC,CAoBrC;;AAEA;AACA;;;AACQC,QAAAA,YAAY,GAAG;AACnB,cAAI,KAAKJ,IAAL,CAAUC,IAAV,KAAmBR,IAAI,CAACS,IAAL,CAAUC,gBAAjC,EAAmD;AAC/C,iBAAKH,IAAL,CAAUK,QAAV,GAAqB,EAArB,CAD+C,CACpB;AAC9B;AACJ,SA5BoC,CA6BrC;;AAEA;AACA;;;AACQC,QAAAA,eAAe,GAAG;AACtB,cAAI,KAAKN,IAAL,CAAUC,IAAV,KAAmBR,IAAI,CAACS,IAAL,CAAUK,cAAjC,EAAiD;AAC7C,iBAAKP,IAAL,CAAUQ,WAAV,GAAwB,KAAKC,UAA7B,CAD6C,CACF;;AAC3C,iBAAKT,IAAL,CAAUU,cAAV,GAA2B,GAA3B,CAF6C,CAEF;AAC9C;AACJ,SAtCoC,CAuCrC;;AAEA;AACA;;;AACQC,QAAAA,cAAc,GAAG;AACrB;AACA,eAAKX,IAAL,CAAUY,QAAV,GAAqB,CAAC,KAAKZ,IAAL,CAAUY,QAAhC;AACH,SA9CoC,CA+CrC;;AAEA;AACA;;;AACQC,QAAAA,kBAAkB,GAAG;AACzB,cAAI,KAAKC,YAAT,EAAuB;AACnB,iBAAKA,YAAL,CAAkBC,MAAlB,GAA2B,iBAA3B,CADmB,CAEnB;;AACA,iBAAKC,QAAL,CAAc,MAAM;AAChB,oBAAMC,MAAM,GAAG,KAAKH,YAAL,CAAkBI,IAAlB,CAAuBC,QAAvB,CAAgCC,CAA/C;AACA,mBAAKN,YAAL,CAAkBI,IAAlB,CAAuBG,WAAvB,CAAmCJ,MAAM,GAAG,CAA5C,EAA+C,CAA/C,EAAkD,CAAlD;AACH,aAHD,EAGG,IAHH;AAIH;AACJ,SA5DoC,CA6DrC;;AAEA;AACA;;;AACUK,QAAAA,KAAK,GAAG;AACd,eAAKvB,aAAL;AACA,eAAKK,YAAL;AACA,eAAKE,eAAL;AACA,eAAKO,kBAAL;AACH;;AAESU,QAAAA,SAAS,GAAG;AAClB,eAAKC,sBAAL;AACH,SA1EoC,CA2ErC;;;AA3EqC,O;;;;;iBAKxB,I;;;;;;;iBAGa,I;;;;;;;iBAGJ,I","sourcesContent":["// Lesson21_.ts\nimport { _decorator, Component, Mask, SpriteFrame, Color, Label } from 'cc';\nconst { ccclass, property } = _decorator;\n\n/**\n * Mask（遮罩）组件 API 全功能演示\n * 核心类：Lesson21_\n */\n@ccclass('Lesson21_')\nexport class Lesson21_ extends Component {\n\n    /* ------------------ 1. 组件声明与获取 ------------------ */\n    //#region 1. 组件声明\n    @property(Mask)\n    mask: Mask = null!;\n\n    @property(SpriteFrame)\n    maskSprite: SpriteFrame = null!;\n\n    @property(Label)\n    contentLabel: Label = null!;   // 用于被遮罩的子文本\n    //#endregion\n\n    /* ------------------ 2. 遮罩类型设置 ------------------ */\n    //#region 2. 类型\n    private setupMaskType() {\n        // 矩形、圆形、图片、椭圆\n        this.mask.type = Mask.Type.GRAPHICS_ELLIPSE;   // GRAPHICS_RECT | GRAPHICS_ELLIPSE | GRAPHICS_STENCIL | SPRITE_STENCIL\n    }\n    //#endregion\n\n    /* ------------------ 3. 椭圆细分（仅椭圆有效） ------------------ */\n    //#region 3. 椭圆细分\n    private setupEllipse() {\n        if (this.mask.type === Mask.Type.GRAPHICS_ELLIPSE) {\n            this.mask.segments = 64;   // 椭圆曲线细分数，越高越圆\n        }\n    }\n    //#endregion\n\n    /* ------------------ 4. 图片遮罩 ------------------ */\n    //#region 4. 图片遮罩\n    private setupSpriteMask() {\n        if (this.mask.type === Mask.Type.SPRITE_STENCIL) {\n            this.mask.spriteFrame = this.maskSprite;   // 指定模板贴图\n            this.mask.alphaThreshold = 0.1;            // Alpha 阈值 0~1\n        }\n    }\n    //#endregion\n\n    /* ------------------ 5. 反转遮罩 ------------------ */\n    //#region 5. 反转\n    private toggleInverted() {\n        // true 时显示区域反转\n        this.mask.inverted = !this.mask.inverted;\n    }\n    //#endregion\n\n    /* ------------------ 6. 动态内容演示 ------------------ */\n    //#region 6. 动态内容\n    private demoDynamicContent() {\n        if (this.contentLabel) {\n            this.contentLabel.string = '被遮罩的文字，超出部分将被裁剪';\n            // 让文字滚动以观察遮罩效果\n            this.schedule(() => {\n                const offset = this.contentLabel.node.position.x;\n                this.contentLabel.node.setPosition(offset + 1, 0, 0);\n            }, 0.05);\n        }\n    }\n    //#endregion\n\n    /* ------------------ 7. 生命周期 ------------------ */\n    //#region Lifecycle\n    protected start() {\n        this.setupMaskType();\n        this.setupEllipse();\n        this.setupSpriteMask();\n        this.demoDynamicContent();\n    }\n\n    protected onDestroy() {\n        this.unscheduleAllCallbacks();\n    }\n    //#endregion\n}"]}