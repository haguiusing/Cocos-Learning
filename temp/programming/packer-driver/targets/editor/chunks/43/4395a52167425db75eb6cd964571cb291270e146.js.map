{"version":3,"sources":["file:///G:/CocosProjects/Cocos-Learning/assets/Scripts/Cocos%E5%9F%BA%E7%A1%80/%E8%84%9A%E6%9C%AC%E6%8C%87%E5%8D%97%E5%8F%8A%E4%BA%8B%E4%BB%B6%E6%9C%BA%E5%88%B6/%E4%BA%8B%E4%BB%B6%E7%B3%BB%E7%BB%9F/Lesson17_.ts"],"names":["_decorator","Component","Node","input","Input","KeyCode","screen","ccclass","property","Lesson17_","registerGlobalInput","on","EventType","TOUCH_START","onGlobalTouchStart","TOUCH_MOVE","onGlobalTouchMove","TOUCH_END","onGlobalTouchEnd","TOUCH_CANCEL","onGlobalTouchCancel","MOUSE_DOWN","onGlobalMouseDown","MOUSE_MOVE","onGlobalMouseMove","MOUSE_UP","onGlobalMouseUp","MOUSE_WHEEL","onGlobalMouseWheel","KEY_DOWN","onGlobalKeyDown","KEY_UP","onGlobalKeyUp","unregisterGlobalInput","off","event","console","log","getLocation","getUILocation","getScrollY","keyCode","listenedNode","targetNode","node","registerNodeEvents","onNodeTouchStart","onNodeTouchMove","onNodeTouchEnd","onNodeTouchCancel","onNodeMouseDown","onNodeMouseMove","onNodeMouseUp","MOUSE_ENTER","onNodeMouseEnter","MOUSE_LEAVE","onNodeMouseLeave","onNodeMouseWheel","onCaptureTouchStart","unregisterNodeEvents","targetOff","currentTarget","name","registerScreenEvents","onWindowResize","onOrientationChange","unregisterScreenEvents","width","height","orientation","onEnable","onDisable"],"mappings":"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","sourcesContent":["// Lesson17_.ts\nimport {\n    _decorator,\n    Component,\n    Node,\n    input,\n    Input,\n    EventTouch,\n    EventMouse,\n    EventKeyboard,\n    KeyCode,\n    screen,\n} from 'cc';\nconst { ccclass, property } = _decorator;\n\n/**\n * 全局 + 节点 触摸 / 鼠标 / 键盘 事件 API 全整合\n * 核心类：Lesson17_\n */\n@ccclass('Lesson17_')\nexport class Lesson17_ extends Component {\n\n    /* ------------------ 1. 全局输入事件（input 对象） ------------------ */\n    //#region 全局输入事件\n    private registerGlobalInput() {\n        // 1-1 全局触摸\n        input.on(Input.EventType.TOUCH_START,  this.onGlobalTouchStart,  this);\n        input.on(Input.EventType.TOUCH_MOVE,   this.onGlobalTouchMove,   this);\n        input.on(Input.EventType.TOUCH_END,    this.onGlobalTouchEnd,    this);\n        input.on(Input.EventType.TOUCH_CANCEL, this.onGlobalTouchCancel, this);\n\n        // 1-2 全局鼠标\n        input.on(Input.EventType.MOUSE_DOWN, this.onGlobalMouseDown, this);\n        input.on(Input.EventType.MOUSE_MOVE, this.onGlobalMouseMove, this);\n        input.on(Input.EventType.MOUSE_UP,   this.onGlobalMouseUp,   this);\n        input.on(Input.EventType.MOUSE_WHEEL, this.onGlobalMouseWheel, this);\n\n        // 1-3 全局键盘\n        input.on(Input.EventType.KEY_DOWN, this.onGlobalKeyDown, this);\n        input.on(Input.EventType.KEY_UP,   this.onGlobalKeyUp,   this);\n    }\n\n    private unregisterGlobalInput() {\n        input.off(Input.EventType.TOUCH_START,  this.onGlobalTouchStart,  this);\n    }\n\n    private onGlobalTouchStart(event: EventTouch) { console.log('[Global] TouchStart', event.getLocation()); }\n    private onGlobalTouchMove(event: EventTouch)  { console.log('[Global] TouchMove',  event.getUILocation()); }\n    private onGlobalTouchEnd(event: EventTouch)   { console.log('[Global] TouchEnd',   event.getLocation()); }\n    private onGlobalTouchCancel(event: EventTouch){ console.log('[Global] TouchCancel'); }\n\n    private onGlobalMouseDown(event: EventMouse) { console.log('[Global] MouseDown', event.getLocation()); }\n    private onGlobalMouseMove(event: EventMouse) { console.log('[Global] MouseMove', event.getLocation()); }\n    private onGlobalMouseUp(event: EventMouse)   { console.log('[Global] MouseUp',   event.getLocation()); }\n    private onGlobalMouseWheel(event: EventMouse){ console.log('[Global] MouseWheel', event.getScrollY()); }\n\n    private onGlobalKeyDown(event: EventKeyboard) { console.log('[Global] KeyDown', KeyCode[event.keyCode]); }\n    private onGlobalKeyUp(event: EventKeyboard)   { console.log('[Global] KeyUp',   KeyCode[event.keyCode]); }\n    //#endregion\n\n    /* ------------------ 2. 节点级事件（this.node 或任意节点） ------------------ */\n    //#region 节点事件\n    @property(Node)\n    targetNode: Node = null!;   // 在编辑器里拖拽要监听的节点；为空则监听自身\n\n    private get listenedNode(): Node {\n        return this.targetNode || this.node;\n    }\n\n    private registerNodeEvents() {\n        // 2-1 节点触摸\n        this.listenedNode.on(Node.EventType.TOUCH_START, this.onNodeTouchStart, this);\n        this.listenedNode.on(Node.EventType.TOUCH_MOVE,  this.onNodeTouchMove,  this);\n        this.listenedNode.on(Node.EventType.TOUCH_END,   this.onNodeTouchEnd,   this);\n        this.listenedNode.on(Node.EventType.TOUCH_CANCEL,this.onNodeTouchCancel,this);\n\n        // 2-2 节点鼠标\n        this.listenedNode.on(Node.EventType.MOUSE_DOWN, this.onNodeMouseDown, this);\n        this.listenedNode.on(Node.EventType.MOUSE_MOVE, this.onNodeMouseMove, this);\n        this.listenedNode.on(Node.EventType.MOUSE_UP,   this.onNodeMouseUp,   this);\n        this.listenedNode.on(Node.EventType.MOUSE_ENTER,this.onNodeMouseEnter,this);\n        this.listenedNode.on(Node.EventType.MOUSE_LEAVE,this.onNodeMouseLeave,this);\n        this.listenedNode.on(Node.EventType.MOUSE_WHEEL,this.onNodeMouseWheel,this);\n\n        // 2-3 捕获阶段示例（第四个参数 useCapture = true）\n        this.listenedNode.on(Node.EventType.TOUCH_START, this.onCaptureTouchStart, this, true);\n    }\n\n    private unregisterNodeEvents() {\n        this.listenedNode.targetOff(this);  // 注销所有事件监听\n    }\n\n    private onNodeTouchStart(event: EventTouch) { console.log('[Node] TouchStart', event.currentTarget?.name); }\n    private onNodeTouchMove(event: EventTouch)  { console.log('[Node] TouchMove',  event.currentTarget?.name); }\n    private onNodeTouchEnd(event: EventTouch)   { console.log('[Node] TouchEnd',   event.currentTarget?.name); }\n    private onNodeTouchCancel(event: EventTouch){ console.log('[Node] TouchCancel'); }\n\n    private onNodeMouseDown(event: EventMouse) { console.log('[Node] MouseDown', event.currentTarget?.name); }\n    private onNodeMouseMove(event: EventMouse) { console.log('[Node] MouseMove', event.currentTarget?.name); }\n    private onNodeMouseUp(event: EventMouse)   { console.log('[Node] MouseUp',   event.currentTarget?.name); }\n    private onNodeMouseEnter(event: EventMouse){ console.log('[Node] MouseEnter'); }\n    private onNodeMouseLeave(event: EventMouse){ console.log('[Node] MouseLeave'); }\n    private onNodeMouseWheel(event: EventMouse){ console.log('[Node] MouseWheel'); }\n\n    private onCaptureTouchStart() { console.log('[Capture] TouchStart on', this.listenedNode.name); }\n    //#endregion\n\n    /* ------------------ 3. 屏幕级事件（window-resize / orientation） ------------------ */\n    //#region 屏幕事件\n    private registerScreenEvents() {\n        screen.on('window-resize',      this.onWindowResize,     this);\n        screen.on('orientation-change', this.onOrientationChange,this);\n    }\n\n    private unregisterScreenEvents() {\n        screen.off('window-resize',      this.onWindowResize,     this);\n        screen.off('orientation-change', this.onOrientationChange,this);\n    }\n\n    private onWindowResize(width: number, height: number) {\n        console.log('[Screen] resize', width, height);\n    }\n\n    private onOrientationChange(orientation: number) {\n        console.log('[Screen] orientation', orientation);\n    }\n    //#endregion\n\n    /* ------------------ 4. 生命周期：统一注册 & 注销 ------------------ */\n    //#region Lifecycle\n    protected onEnable(): void {\n        this.registerGlobalInput();\n        this.registerNodeEvents();\n        this.registerScreenEvents();\n    }\n\n    protected onDisable(): void {\n        this.unregisterGlobalInput();\n        this.unregisterNodeEvents();\n        this.unregisterScreenEvents();\n    }\n    //#endregion\n}"]}